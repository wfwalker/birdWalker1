<!-- <?xml-stylesheet type="text/xsl" href="build.xsl"?> -->

<project name="birding-xml" default="build-all">

	<!-- PRODUCTION TARGETS -->

	<target
		name="set-timestamp"
		description="Set the timestamp for marking HTML output files">

		<tstamp>
			<format property="my.tstamp" pattern="MM/dd/yyyy hh:mm aa"/>
		</tstamp>
	</target>

	<target
		name="build-indices"
		depends="set-timestamp">

		<style
			taskname="indices"
			style="report-xsl/indices.xsl"
			destdir="html"
			basedir="sources/indices"
			processor="xalan">
			<param name="in-tstamp" expression="'${my.tstamp}'"/>
			<include name="*.xml"/>
		</style>
	</target>

	<target
		name="build-species-reports"
		depends="set-timestamp">

		<style
			taskname="species-reports"
			style="report-xsl/species-report.xsl"
			destdir="html"
			basedir="sources/species"
			processor="xalan">
			<param name="in-tstamp" expression="'${my.tstamp}'"/>
		</style>
	</target>

	<target
		name="build-location-reports"
		depends="set-timestamp">

		<style
			taskname="location-reports"
			style="report-xsl/location-report.xsl"
			destdir="html"
			basedir="sources/locations"
			processor="xalan">
			<param name="in-tstamp" expression="'${my.tstamp}'"/>
		</style>
	</target>

	<target
		name="build-trip-reports"
		depends="set-timestamp">

		<style
			taskname="trip-reports"
			style="report-xsl/trip-report.xsl"
			destdir="html"
			basedir="sources/trips"
			processor="xalan">
			<param name="in-tstamp" expression="'${my.tstamp}'"/>
		</style>
	</target>

	<target
		name="build-all"
		description="generate all the individual pages for species, locations, and trips"
		depends="build-species-reports, build-trip-reports, build-location-reports, build-indices">
	</target>

	<target name="upload-to-shout">
		<ftp server="duracef.shout.net"
       		remotedir="public_html/birdwalker"
       		userid="walker"
       		password="ludwig0"
			passive="yes"
			verbose="yes"
       		depends="yes"
       		binary="no">
    		<fileset dir="html">
      			<include name="stylesheet.css"/>
    		</fileset>
  		</ftp>

		<ftp server="duracef.shout.net"
       		remotedir="public_html/birdwalker/images"
       		userid="walker"
       		password="ludwig0"
			passive="yes"
			verbose="yes"
       		depends="yes"
       		binary="no">
    		<fileset dir="html/images">
      			<include name="*.gif"/>
    		</fileset>
  		</ftp>

		<ftp server="duracef.shout.net"
       		remotedir="public_html/birdwalker"
       		userid="walker"
       		password="ludwig0"
			passive="yes"
			verbose="yes"
       		depends="yes"
       		binary="no">
    		<fileset dir="html">
      			<include name="**/*.html"/>
    		</fileset>
  		</ftp>
	</target>
</project>
